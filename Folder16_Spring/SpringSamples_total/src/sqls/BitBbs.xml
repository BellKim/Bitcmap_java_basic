<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="Bbs">

	<select id="getBbsList" resultType="bit.com.a.model.BbsDto">
		SELECT SEQ, ID, REF, STEP, DEPTH, TITLE, CONTENT,
				WDATE, DEL, READCOUNT
		FROM BBS
		ORDER BY REF DESC, STEP ASC
	</select>
	
	<insert id="writeBbs" parameterType="bit.com.a.model.BbsDto">
		INSERT INTO BBS(SEQ,ID,REF,STEP,DEPTH,TITLE,CONTENT,WDATE,DEL,READCOUNT)
		VALUES(SEQ_BBS.nextval, #{id}, 
		(SELECT NVL(MAX(REF),0)+1 FROM BBS),
				0, 0, #{title}, #{content}, SYSDATE, 0, 0)
	</insert>
	<!--NVL : 지정된 값이 NULL일 경우 지정값을 출력한다. 
	 NVL("값", "지정값")		"값" 이 NULL이면 0으로 출력하기.  
	 -->




</mapper>



